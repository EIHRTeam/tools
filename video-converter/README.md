 ### 🎬 神奇妙妙小工具 - 视频转GIF/WebP转换器

一个功能强大、简单易用的视频转GIF/WebP在线转换工具，支持高质量输出、精确时间选择和自动文件优化！🎉

***by [oculto](https://github.com/oculto-link)***

## 声明
此处仅有脚本文件，不含其它资产。

## ✨ 功能特色 

- 🎥 视频转GIF/WebP- 支持两种流行格式
- ⏱️ 毫秒级时间选择 - 精确到帧的时间标记
- 🎚️ 质量可调节 - 1-100级质量滑块控制
- 🎨 渐入渐出效果 - 平滑过渡，专业感十足
- 📏 自动尺寸优化 - 根据时长智能调整分辨率
- 🗂️ 自定义文件名 - 支持中英文命名
- 🧹 自动清理 - 定时清理临时文件
- 📱 响应式设计 - 支持各种设备屏幕

## 📦 下载与安装

# 前置条件

1. 🖥️ 系统要求
- 操作系统: Windows 10/11, macOS 10.14+, Ubuntu 18.04+
- 内存: 至少 2GB 可用内存
- 磁盘空间: 至少 100MB 可用空间

2. 🔧 必备软件

必须安装以下软件：

| 软件 | 版本 | 下载链接 |
|------|------|----------|
| Node.js | 16.x 或更高 | [nodejs.org](https://nodejs.org/) |
| FFmpeg | 最新版 | [ffmpeg.org](https://ffmpeg.org/) |

3.🔧前期调试

首先双击打开或右键管理员身份运行`一键安装.bat`

如遇因网络原因无法下载请挂梯子或手动安装

安装完毕后右键管理员身份运行`启动.bat`

等待程序安装依赖和临时文件夹

全部安装完成后会自动打开浏览器以供使用

## 🎯 使用方法

1️⃣ 上传视频
- 点击上传区域或拖拽视频文件到上传区域
- 支持格式：MP4, AVI, MOV, WebM
- 最大文件大小：100MB

2️⃣ 预览与标记时间
- 播放视频，找到想要的片段
- 点击 "标记开始点" 按钮设置开始时间
- 点击 "标记结束点" 按钮设置结束时间
- 使用 "前一帧/后一帧" 按钮进行精确调整

3️⃣ 设置转换参数
- 渐入渐出：设置过渡效果的帧数（默认10帧）
- 质量等级：拖动滑块选择1-100的质量值
- 输出格式：选择GIF或WebP格式
- 文件名：输入自定义文件名（可选）

4️⃣ 开始转换
- 点击 "开始高质量转换" 按钮
- 等待处理完成（进度条显示进度）
- 处理时间取决于视频长度和质量设置

5️⃣ 下载结果
- 转换完成后，预览生成的文件
- 点击 "下载转换文件" 按钮保存
- 文件自动保存在浏览器默认下载目录

## 🚨 常见问题与解决方法

❌ 问题1：端口被占用
```
Error: listen EADDRINUSE: address already in use 127.0.0.1:3001
```

解决方法：
```bash
# Windows 用户
netstat -ano | findstr :3001
taskkill /PID <进程号> /F

# Mac/Linux 用户
lsof -i :3001
kill -9 <进程号>
```

或者修改后端代码中的端口号：
```javascript
const PORT = 3002;  // 改为其他端口
```

❌ 问题2：FFmpeg未安装
```
Error: Command failed: ffmpeg...
```

解决方法：
1. 确认FFmpeg已正确安装
2. 验证安装：在命令行输入 `ffmpeg -version`
3. 确保FFmpeg路径已添加到系统环境变量

❌ 问题3：转换过程卡住
解决方法：
1. 刷新页面重试
2. 检查视频文件是否损坏
3. 尝试选择更短的片段（<30秒）
4. 降低质量设置（<70）

❌ 问题4：文件太大无法下载
现象： 文件超过20MB限制

解决方法：
1. 选择更短的视频片段
2. 降低质量设置
3. 选择较小的输出尺寸
4. 系统会自动尝试优化，但可能会降低质量

❌ 问题5：WebP转换失败
现象：WebP格式转换时出现错误

解决方法：
1. 尝试转换为GIF格式
2. 确保FFmpeg版本支持WebP
3. 重启服务重试

⚙️ 高级配置

修改默认设置
在 `app.js` 中可修改：

```javascript
// 修改文件大小限制（默认20MB）
const maxSize = 30 * 1024 * 1024;  // 改为30MB

// 修改默认分辨率
if (duration > 30) {
    scaleFilter = 'scale=640:360';  // 修改为需要的分辨率
}
```

自定义清理规则
```javascript
// 修改清理间隔（默认1小时）
setInterval(() => {
    // 清理逻辑
}, 2 * 60 * 60 * 1000);  // 改为2小时
```

## 📊 技术参数

| 项目 | 规格 |
|------|------|
| 最大输入文件 | 100MB |
| 最大输出文件 | 20MB（自动优化） |
| 最大片段时长 | 60秒 |
| 输出分辨率 | 640×360 - 800×450（自适应） |
| 支持格式 | MP4, AVI, MOV, WebM → GIF, WebP |
| 帧率范围 | 5-30 fps（自适应） |

 🛠️ 故障排除清单

遇到问题？按顺序尝试：

1. ✅ 检查FFmpeg是否安装：`ffmpeg -version`
2. ✅ 检查Node.js版本：`node --version`（需要16+）
3. ✅ 检查端口是否占用：尝试端口3002或3003
4. ✅ 重启服务：关闭并重新运行 `node app.js`
5. ✅ 检查视频文件：尝试其他视频文件测试
6. ✅ 查看控制台：浏览器按F12查看控制台错误信息
7. ✅ 查看终端：后端运行终端会显示详细错误信息

## 📁 项目结构

```
神奇妙妙小工具/
├── index.html          # 前端界面
├── app.js              # 后端服务器
├── uploads/            # 上传文件临时目录（自动创建）
├── converted_*.gif     # 转换输出文件
├── converted_*.webp    # 转换输出文件
└── README.md           # 本文件
```

## 🐛 反馈与支持
遇到问题或有建议？请：
1. 查看本README的故障排除部分
2. 检查控制台错误信息
3. 提供详细的复现步骤
